{"componentChunkName":"component---src-templates-blog-template-js","path":"/vercel-edge-config/","result":{"data":{"cur":{"id":"83bce82a-be53-580c-911c-1f6dbd0412bd","html":"<h1 id=\"vercel-edge-network\" style=\"position:relative;\"><a href=\"#vercel-edge-network\" aria-label=\"vercel edge network permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Vercel Edge Network</h1>\n<p>Vercel Edge Network는 인터넷과 Vercel 배포 사이에 위치합니다. 이러한 유형의 네트워크 토폴로지는 콘텐츠 전송 네트워크 또는 CDN이라고도 합니다.</p>\n<h3 id=\"regions\" style=\"position:relative;\"><a href=\"#regions\" aria-label=\"regions permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Regions</h3>\n<p>가능한 한 빨리 요청을 라우팅하기 위해 Edge Network는 전 세계 수십 곳에서 실행되고 있습니다.\n이러한 모든 위치(Regions 라고 함)에서 Serverless Funtion 및/또는 정적 파일을 출력하는 빌드를 생성하는 배포를 생성할 수 있습니다.</p>\n<p>그러면 Edge Network는 들어오는 요청을 Serverless Funtion이 실행 중인 가장 가까운 위치로 자동으로 전달합니다(정적 파일은 항상 전체 네트워크에 분산되므로 특정 위치에 국한되지 않음).</p>\n<p>배포의 Serverless Funtion이 요청된 지역에 생성되지 않은 경우 요청은 배포된 Serverless Funtion이 포함된 가장 가까운 지역으로 전달됩니다.</p>\n<h3 id=\"caching\" style=\"position:relative;\"><a href=\"#caching\" aria-label=\"caching permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Caching</h3>\n<p>Vercel Edge Network는 가능한 한 빨리 사용자에게 데이터를 제공하기 위해 edge에서 콘텐츠를 캐시합니다.</p>\n<h3 id=\"streaming\" style=\"position:relative;\"><a href=\"#streaming\" aria-label=\"streaming permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Streaming</h3>\n<p>Vercel은 Edge Functions의 스트리밍 응답을 지원합니다.\nEdge Function에서 Streams Web API를 사용하면 한 번에 모두가 아니라 점진적으로 원격 소스에서 데이터를 반환할 수 있습니다.</p>\n<h3 id=\"supported-protocols\" style=\"position:relative;\"><a href=\"#supported-protocols\" aria-label=\"supported protocols permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Supported Protocols</h3>\n<ul>\n<li>HTTPS</li>\n<li>HTTP/1.1</li>\n<li>HTTP/2</li>\n</ul>\n<h2 id=\"edge-config\" style=\"position:relative;\"><a href=\"#edge-config\" aria-label=\"edge config permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Edge Config</h2>\n<blockquote>\n<p>Edge Config 는 모든 요금제에서 베타로 제공됩니다.</p>\n</blockquote>\n<p>Edge Config는 Vercel 계정과 연결된 key-value 데이터 저장소입니다.\n외부 데이터베이스를 querying하지 않고도 Edge에서 데이터를 읽을 수 있습니다. 이를 사용하여 업스트림 서버를 건드리지 않고 Edge 속도로 feature flags를 확인하거나 리디렉션을 시작하거나 악의적인 IP를 차단할 수 있습니다.</p>\n<p>Edge Functions, Edge Middleware 및 Serverless Functions에서 Edge Config를 사용할 수 있습니다.</p>\n<h3 id=\"using-edge-config\" style=\"position:relative;\"><a href=\"#using-edge-config\" aria-label=\"using edge config permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using Edge Config</h3>\n<p>Edge Config 클라이언트 SDK 또는 Vercel API를 사용하여 Edge Config을 읽을 수 있습니다.\n가장 중요한 것이 요청 속도인 경우 클라이언트 SDK를 사용하거나 Edge Config endpoint를 호출하는 것이 좋습니다. 이 경우 데이터가 전역적으로 복제되고 요청에 속도 제한이 없으며 저렴합니다.</p>\n<p>대신 Vercel API를 사용하면 항상 데이터의 최신 값을 얻을 수 있지만 최적화의 이점을 얻지 못하고 읽기 속도가 느립니다.</p>\n<h3 id=\"specifications\" style=\"position:relative;\"><a href=\"#specifications\" aria-label=\"specifications permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Specifications</h3>\n<ul>\n<li><a href=\"https://vercel.com/docs/concepts/edge-network/edge-config/edge-config-limits#limits\">Limits</a> 에 설명된 Plan에 따라 Vercel 계정당 하나이상의 Edge Config를 가질 수 있습니다.</li>\n<li>하나의 Vercel 프로젝트에서 여러 Edge Config를 사용할 수 있습니다</li>\n<li>각 Edge Config는 여러 Vercel 프로젝트에서 엑세스 할 수 있습니다</li>\n<li>Edge Config는 환경 변수를 사용하여 프로젝트 내의 다양한 환경으로 범위를 지정할 수 있습니다</li>\n<li>Edge Config 액세스는 기본적으로 안전합니다. 읽기에는 read access token이 필요하고 쓰기에는 API 토큰이 필요합니다.</li>\n</ul>\n<h3 id=\"use-cases\" style=\"position:relative;\"><a href=\"#use-cases\" aria-label=\"use cases permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Use cases</h3>\n<p>Edge Config는 자주 액세스하고 드물게 업데이트되는 데이터에 적합합니다.</p>\n<ul>\n<li><a href=\"https://vercel.com/templates/next.js/feature-flag-apple-store\">Feature flags 와 A/B 테스트</a>: Edge Config에 feature flags를 저장하여 A/B 테스트를 수행할 수 있습니다. 데이터 베이스가 아닌 Edge Config에 이러한 데이터를 가져오도록 할경우 페이지 로드를 수백 밀리초 줄일 수 있습니다.</li>\n<li>중요한 redirects: 긴급하게 URL을 리디렉션해야 하는 경우 Edge Config는 웹 사이트를 다시 배포할 필요가 없는 빠른 솔루션을 제공합니다. Edge middleware를 사용하면 사용자가 잘못된 URL을 방문할 때 사용자를 리디렉션하도록 Edge Config에서 읽을 수 있습니다.</li>\n<li>악성 IP 및 User Agent 차단: Edge Config에 악의적인 IP 세트를 저장한 다음 업스트림 서버를 호출하지 않고 감지 시 차단합니다.</li>\n</ul>\n<h3 id=\"limits\" style=\"position:relative;\"><a href=\"#limits\" aria-label=\"limits permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Limits</h3>\n<ul>\n<li>\n<p>단일 Edge Config에는 계정 plan에 따라 최대 크기가 있습니다.</p>\n<ul>\n<li>8 KB for Hobby</li>\n<li>64 KB for Pro</li>\n<li>512 KB for Enterprise</li>\n</ul>\n</li>\n<li>\n<p>모든 계정 Plan은 제한된 양의 Edge Config를 배포할 수 있습니다.</p>\n<ul>\n<li>A maximum of 1 for Hobby</li>\n<li>A maximum of 3 for Pro</li>\n<li>A maximum of 10 for Enterprise</li>\n</ul>\n</li>\n<li>\n<p>데이터 항목 키 네임 제한사항</p>\n<ul>\n<li>키는 256자로 제한</li>\n<li>유효한 키 네임에는 - 또는 _ 이외의 특수문자가 포함 될 수 없습니다. 해당 정규식 패턴에 대해 키 네임을 체크 합니다: ^[A-z0-9_-]+$</li>\n</ul>\n</li>\n<li>쓰기는 리소스를 많이 사용합니다.</li>\n<li>Edge Config에 대한 쓰기가 전역으로 전파되는 데 최대 10초가 걸릴 수 있습니다. 자주 업데이트되거나 업데이트 후 즉시 액세스해야 하는 데이터에는 Edge Config를 사용하지 마십시오.</li>\n<li>로컬 개발 환경에서 액세스한 Edge Config는 Vercel의 최적화를 활용할 수 없습니다. 결과적으로 Production보다 100밀리초 이상 느릴 수 있습니다.</li>\n<li><a href=\"https://vercel.com/docs/concepts/projects/shared-environment-variables\">공유 환경 변수</a>를 통한 Edge Config 추가는 아직 지원되지 않습니다.</li>\n</ul>","excerpt":"Vercel Edge Network Vercel Edge Network는 인터넷과 Vercel 배포 사이에 위치합니다. 이러한 유형의 네트워크 토폴로지는 콘텐츠 전송 네트워크 또는 CDN이라고도 합니다. Regions 가능한 한 빨리 요청을 라우팅하기 위해 Edge Network는 전 세계 수십 곳에서 실행되고 있습니다.\n이러한 모든 위치(Regions 라고 함)에서 Serverless Funtion 및/또는 정적 파일을 출력하는 빌드를 생성하는 배포를 생성할 수 있습니다. 그러면 Edge Network는 들어오는 요청을 Serverless Funtion이 실행 중인 가장 가까운 위치로 자동으로 전달합니다(정적 파일은 항상 전체 네트워크에 분산되므로 특정 위치에 국한되지 않음). 배포의 Serverless Funtion이 요청된 지역에 생성되지 않은 경우 요청은 배포된 Serverless Funtion이 포함된 가장 가까운 지역으로 전달됩니다. Caching Vercel Edge …","frontmatter":{"date":"February 01, 2023","title":"Vercel Edge Network","categories":"블로그","author":"허원호","emoji":null},"fields":{"slug":"/vercel-edge-config/"}},"next":{"id":"af888e55-7d0b-5a21-bffb-2733b9caf6a6","html":"<h1 id=\"vercel-edge-middleware\" style=\"position:relative;\"><a href=\"#vercel-edge-middleware\" aria-label=\"vercel edge middleware permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Vercel Edge middleware</h1>\n<p>Edge middleware란 사이트에서 요청이 처리되기 전에 실행되는 코드입니다.</p>\n<p>요청에 따라 응답을 수정할 수 있습니다. <strong>캐시보다 먼저 실행되기 때문에 middleware를 사용하는 것은 정적으로 생성된 콘텐츠에 개인화를 제공하는 효과적인 방법입니다.</strong></p>\n<p>들어오는 요청에 따라 응답을 반환하기 전에 사용자 지정 논리를 실행하고 rewrite, redirect, headers 추가 등을 수행할 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 36.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABvklEQVQoz02RuUoDURSGTxQZxEJBxdLGQkFwgaAEFbSwEER7GwtBELdSUTA4mMI0CUlhE4KNTfIM6hOkSYokZN83sk7IbM71v6OIAzPJnXvu93/nDL1/fNLm9i5dXV9TIBgkp9NJbrd7xm63b4miuOHxeGbr9fqIy+Wyeb3edZ/PZ/P7/VOMMSGdTs9jfy0UCi1iPY6biD/GRgUSBGHSarVOp1IpqtVql7lcTs9ms2q1Wn2RZXmh3W43C4VCvdlsssFgcNzv93eLxSKvqeA963a7D7iJjC+F5IF0rmlqVNP0hK7rRwBe5PN5hmLWaDTeAFvhIBgx7LFer3cG6GGpVGKxWEwDmEmS9IzgH0NAvOz3MgzDUS6XT3hqJpNhaPe10+kst1otBfYyB8LuFID9SqXC4vG4xGuxdiAEhoZBiqLMaZq2p6rqAZgTOHSDlk0gDgWwv4TWzTXCuOE5N+Twf+9cCDINLTA0wdwW7RFgtmQyKSYSiUdYHSB9GuB7jOEONg7UrOLwHCAiRnGL3yfU7EDor2ULgMP4P4zkIcyNAKNoNEqYk1mDAAqHwxSJRAjt866IfwTYEUZC3A4ztHwD6V+mz8mLGMUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"(edge-middleware-light.png\"\n        title=\"(edge-middleware-light.png\"\n        src=\"/static/c4ca467d46429a6c54a05b72211517ca/37523/edge-middleware-light.png\"\n        srcset=\"/static/c4ca467d46429a6c54a05b72211517ca/e9ff0/edge-middleware-light.png 180w,\n/static/c4ca467d46429a6c54a05b72211517ca/f21e7/edge-middleware-light.png 360w,\n/static/c4ca467d46429a6c54a05b72211517ca/37523/edge-middleware-light.png 720w,\n/static/c4ca467d46429a6c54a05b72211517ca/302a4/edge-middleware-light.png 1080w,\n/static/c4ca467d46429a6c54a05b72211517ca/c1b63/edge-middleware-light.png 1200w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>Vercel의 Edge Network에 전역적으로 배포되며 서버 측 로직을 방문자의 출처에 가까운 Edge로 이동할 수 있습니다.</p>\n<p>미들웨어는 Chrome 브라우저에서 사용 하는 것과 동일한 고성능 V8 JavaScript 및 WebAssembly 엔진 에 구축된 Vercel Edge Runtime 을 사용합니다.</p>\n<p>Edge Runtime은 Web Standard API(FetchEvent, Response, Request)의 하위 subset을 노출하고 확장합니다.</p>\n<h2 id=\"edge-middleware-api\" style=\"position:relative;\"><a href=\"#edge-middleware-api\" aria-label=\"edge middleware api permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Edge middleware API</h2>\n<p>Edge middleware 는 <a href=\"https://vercel.com/docs/concepts/functions/edge-functions/edge-functions-api\">Edge runtime</a> 에서 실행됩니다.</p>\n<p>이 런타임은 들어오는 요청에 따라 응답을 조작하고 구성하는 방법을 더 잘 제어할 수 있도록 확장된 Web Standard API의 하위 subset을 노출합니다.</p>\n<p>Edge Runtime은 V8 코드를 실행할 수 있지만 process, path 또는 fs와 같은 Native Node.js API에 액세스할 수 없습니다.</p>\n<p>대신 fetch, request 및 response와 같은 웹 API에 액세스할 수 있습니다. API 계층은 설계상 최소화되어 크기를 작게 유지하고 성능을 빠르게 유지합니다.</p>\n<h3 id=\"edge-middleware-제한사항\" style=\"position:relative;\"><a href=\"#edge-middleware-%EC%A0%9C%ED%95%9C%EC%82%AC%ED%95%AD\" aria-label=\"edge middleware 제한사항 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Edge middleware 제한사항</h3>\n<h4 id=\"nodejs-api-는-사용할-수-없습니다\" style=\"position:relative;\"><a href=\"#nodejs-api-%EB%8A%94-%EC%82%AC%EC%9A%A9%ED%95%A0-%EC%88%98-%EC%97%86%EC%8A%B5%EB%8B%88%EB%8B%A4\" aria-label=\"nodejs api 는 사용할 수 없습니다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Node.js API 는 사용할 수 없습니다.</h4>\n<ul>\n<li>Native Node.js API 는 지원되지 않습니다. (ex. 파일시스템에 대한 읽기 쓰기)</li>\n<li>Node 모듈 은 ES 모듈을 구현하고 Native Node.js API를 사용하지 않는 한 사용할 수 있습니다. (ex. path-to-regexp 패키지를 사용하여 경로 일치를 수행)</li>\n<li>ES 모듈을 사용하고 코드를 재사용 가능한 파일로 분할한 다음 응용 프로그램을 빌드할 때 함께 번들링 할 수 있습니다.</li>\n<li>require를 직접 호출하는 것은 허용되지 않습니다. import 경로를 정적으로 확인할 수 있을 때 동작 할 수 있지만 권장되지 않습니다. 대신 ES 모듈 사용하세요.</li>\n</ul>\n<h4 id=\"동적-코드-실행으로-인한-런타임-오류-발생\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EC%A0%81-%EC%BD%94%EB%93%9C-%EC%8B%A4%ED%96%89%EC%9C%BC%EB%A1%9C-%EC%9D%B8%ED%95%9C-%EB%9F%B0%ED%83%80%EC%9E%84-%EC%98%A4%EB%A5%98-%EB%B0%9C%EC%83%9D\" aria-label=\"동적 코드 실행으로 인한 런타임 오류 발생 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동적 코드 실행으로 인한 런타임 오류 발생</h4>\n<ul>\n<li>eval</li>\n<li>new Function</li>\n<li>버퍼 parameter가 있는 WebAssembly.instantiate()</li>\n</ul>\n<h4 id=\"최대실행기간\" style=\"position:relative;\"><a href=\"#%EC%B5%9C%EB%8C%80%EC%8B%A4%ED%96%89%EA%B8%B0%EA%B0%84\" aria-label=\"최대실행기간 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>최대실행기간</h4>\n<p>Edge middleware 실행의 최대 기간은 5초입니다.</p>\n<h4 id=\"메모리\" style=\"position:relative;\"><a href=\"#%EB%A9%94%EB%AA%A8%EB%A6%AC\" aria-label=\"메모리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>메모리</h4>\n<p>Edge Middleware는 최대 128MiB까지만 사용할 수 있습니다. 이 제한을 초과하면 실행이 중단되고 502 오류가 반환됩니다.</p>\n<h4 id=\"코드-크기-제한\" style=\"position:relative;\"><a href=\"#%EC%BD%94%EB%93%9C-%ED%81%AC%EA%B8%B0-%EC%A0%9C%ED%95%9C\" aria-label=\"코드 크기 제한 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>코드 크기 제한</h4>\n<p>Edge middleware의 최대 크기는 JavaScript 코드, import 된 라이브러리 및 함수에 번들로 포함된 모든 파일을 포함하여 압축 후 1MiB입니다.</p>\n<h4 id=\"환경변수에-대한-제한\" style=\"position:relative;\"><a href=\"#%ED%99%98%EA%B2%BD%EB%B3%80%EC%88%98%EC%97%90-%EB%8C%80%ED%95%9C-%EC%A0%9C%ED%95%9C\" aria-label=\"환경변수에 대한 제한 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>환경변수에 대한 제한</h4>\n<p>Vercel은 최대 총 64KB 크기의 환경 변수를 허용하지만 Edge 미들웨어는 환경 변수당 5KB로 제한됩니다.</p>\n<h4 id=\"요청-제한\" style=\"position:relative;\"><a href=\"#%EC%9A%94%EC%B2%AD-%EC%A0%9C%ED%95%9C\" aria-label=\"요청 제한 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>요청 제한</h4>\n<ul>\n<li>Maximum URL length: 14KiB</li>\n<li>Maximum request body length: 4 MiB</li>\n<li>Maximum number of request headers: 64</li>\n<li>Maximum request headers length: 16KiB</li>\n</ul>\n<h4 id=\"fetch-api-제한\" style=\"position:relative;\"><a href=\"#fetch-api-%EC%A0%9C%ED%95%9C\" aria-label=\"fetch api 제한 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>fetch API 제한</h4>\n<p>fetch API 최대 요청 수는 950 입니다</p>\n<h4 id=\"date-api-제한\" style=\"position:relative;\"><a href=\"#date-api-%EC%A0%9C%ED%95%9C\" aria-label=\"date api 제한 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Date API 제한</h4>\n<p>Date.now()는 I/O 작업(ex: fetch) 이후에만 진행됩니다.</p>","frontmatter":{"date":"January 30, 2023","title":"Vercel Edge middleware","categories":"블로그","author":"허원호","emoji":null},"fields":{"slug":"/vercel-edge-middleware/"}},"prev":null,"site":{"siteMetadata":{"siteUrl":"https://her0707.github.io","comments":{"utterances":{"repo":"zoomkoding/zoomkoding-gatsby-blog"}}}}},"pageContext":{"slug":"/vercel-edge-config/","nextSlug":"/vercel-edge-middleware/","prevSlug":""}},"staticQueryHashes":["1073350324","2938748437"]}